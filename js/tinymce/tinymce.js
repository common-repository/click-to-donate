(function(){var pName="ClickToDonate";var DOM=tinymce.DOM;tinymce.create("tinymce.plugins."+pName,{init:function(ed,url){var disabled=true;ed.addCommand("mce_"+pName,function(){if(disabled){return}ed.windowManager.open({id:pName+"Links",width:480,height:"auto",wpDialog:true,title:ed.getLang(pName+".title")},{plugin_url:url})});ed.addButton(pName,{title:ed.getLang(pName+".button"),cmd:"mce_"+pName});ed.onNodeChange.add(function(ed,cm,n,co,e){disabled=(co&&n.nodeName!="A");function o(p){var s,n=e.parents,t=p;if(typeof(p)=="string"){t=function(v){return v.nodeName==p}}for(s=0;s<n.length;s++){if(t(n[s])){return n[s]}}}C=o("A");if(G=cm.get(pName)){if(!C||!C.name){var match=/^#ctd\-\d+$/i.test(ed.dom.getAttrib(C,"href",""));G.setDisabled(!C&&co);G.setActive(!!C&&match)}}})},getInfo:function(){return this.ed.getParam(pName,false)}});tinymce.PluginManager.add(pName,eval("tinymce.plugins."+pName))})();